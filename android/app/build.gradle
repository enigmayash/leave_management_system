plugins {
    id 'com.android.application' // Apply the Android application plugin
    id 'kotlin-android' // Apply the Kotlin plugin
    id 'com.google.gms.google-services' // Apply the Google Services plugin
    id 'dev.flutter.flutter-gradle' // Apply the Flutter Gradle plugin
}

// Load local.properties file to get Flutter version code and name
def localProperties = new Properties()
def localPropertiesFile = rootProject.file("local.properties")
if (localPropertiesFile.exists()) {
    localPropertiesFile.withReader("UTF-8") { reader ->
        localProperties.load(reader)
    }
}

// Set default Flutter version code and name if not specified in local.properties
def flutterVersionCode = localProperties.getProperty("flutter.versionCode", "1")
def flutterVersionName = localProperties.getProperty("flutter.versionName", "1.0")

android {
    compileSdkVersion 31 // Set compile SDK version
    buildToolsVersion "31.0.0" // Set build tools version

    defaultConfig {
        applicationId "com.example.leave_management_system" // Set your application ID
        minSdkVersion 23 // Minimum SDK version required
        targetSdkVersion 31 // Target SDK version
        versionCode flutterVersionCode.toInteger() // Version code
        versionName flutterVersionName // Version name

        // Enable Java 8 bytecode compatibility
        compileOptions {
            sourceCompatibility JavaVersion.VERSION_1_8
            targetCompatibility JavaVersion.VERSION_1_8
        }
    }

    buildTypes {
        release {
            // TODO: Add your own signing config for release builds
            // Example: signingConfig signingConfigs.release
            signingConfig signingConfigs.debug // Use debug keys for now
        }
    }

    // Add dependencies for Firebase (example with Firebase Analytics)
    dependencies {
        implementation platform('com.google.firebase:firebase-bom:33.1.1')
        implementation 'com.google.firebase:firebase-analytics'
        // Add other Firebase dependencies as needed for your project
    }
}

// Flutter configuration
flutter {
    source '../..' // Relative path to your Flutter project directory
}
